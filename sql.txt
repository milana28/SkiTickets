CREATE DATABASE skitickets;
USE skitickets;
CREATE SCHEMA SkiTickets;

CREATE TABLE SkiTickets.Age (
id INT PRIMARY KEY IDENTITY,
type VARCHAR(100) NOT NULL,
minYears INT NOT NULL,
maxYears INT NOT NULL
);

CREATE TABLE SkiTickets.Person (
id INT PRIMARY KEY IDENTITY,
firstName VARCHAR(100) NOT NULL,
lastName VARCHAR(100) NOT NULL,
ageId INT NOT NULL,
FOREIGN KEY (ageId) REFERENCES SkiTickets.Age(id) ON DELETE CASCADE
);

CREATE TABLE SkiTickets.TicketType (
id INT PRIMARY KEY IDENTITY,
name VARCHAR(200) NOT NULL,
type VARCHAR(100) NOT NULL,
days INT NOT NULL,
ageId INT NOT NULL,
FOREIGN KEY (ageId) REFERENCES SkiTickets.Age(id) ON DELETE CASCADE
);

CREATE TABLE SkiTickets.Ticket (
id INT PRIMARY KEY IDENTITY,
ticketTypeId INT NOT NULL,
fromDate DATETIME NOT NULL,
toDate DATETIME NOT NULL,
FOREIGN KEY (ticketTypeId) REFERENCES SkiTickets.TicketType(id) ON DELETE CASCADE
);

CREATE TABLE SkiTickets.SellingPoint (
id INT PRIMARY KEY IDENTITY,
name VARCHAR(100) NOT NULL,
location VARCHAR(200) NOT NULL,
);

CREATE TABLE SkiTickets.TicketPurchase (
id INT PRIMARY KEY IDENTITY,
ticketId INT NOT NULL,
personId INT NOT NULL,
placeId INT NOT NULL,
date DATETIME NOT NULL,
FOREIGN KEY (ticketId) REFERENCES SkiTickets.Ticket(id),
FOREIGN KEY (personId) REFERENCES SkiTickets.Person(id) ON DELETE CASCADE,
FOREIGN KEY (placeId) REFERENCES SkiTickets.SellingPoint(id) ON DELETE CASCADE
);